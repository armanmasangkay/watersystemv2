on: push
name: ðŸš€ Deploy website on push
jobs:
  web-deploy:
    name: ðŸŽ‰ Deploy
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Get latest code
      uses: actions/checkout@v2.3.2
      
    - name: Update dependencies
      run: composer update
      
    - name: Install dependencies
      run: composer install
      
    - name: Copy .env file
      run: php -r "file_exists('.env') || copy('.env.example', '.env');"
      
#     - name: Clear configuration
#       run: php artisan config:clear
      
#     - name: Clear cache
#       run: php artisan cache:clear
  
    - name: Generate app key
      run: php artisan key:generate
    
    - name: ðŸ“‚ Sync files
      uses: SamKirkland/FTP-Deploy-Action@v4.0.0
      with:
        server: ftp.macrohonwater.ph
        username: dev-mws@dev-mws.macrohonwater.ph
        password: dev-macrohonwaters@2023
        server-dir: /
        
